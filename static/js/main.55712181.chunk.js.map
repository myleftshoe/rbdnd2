{"version":3,"sources":["Demo.js","index.js"],"names":["springConfig","stiffness","damping","itemsCount","Demo","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleTouchStart","key","pressLocation","e","handleMouseDown","touches","handleTouchMove","preventDefault","handleMouseMove","pos","pressY","_ref","pageY","setState","topDeltaY","mouseY","isPressed","originalPosOfLastPressed","_ref2","n","min","max","_this$state","state","order","currentRow","Math","round","newOrder","indexOf","arr","from","to","_arr","slice","val","splice","reinsert","handleMouseUp","range","window","addEventListener","_this2","_this$state2","react_default","a","createElement","className","map","i","style","scale","spring","shadow","y","react_motion","_ref3","onMouseDown","bind","onTouchStart","boxShadow","concat","transform","WebkitTransform","zIndex","React","Component","ReactDOM","render","Demo_Demo","document","getElementById"],"mappings":"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","file":"static/js/main.55712181.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Motion, spring} from 'react-motion';\r\nimport range from 'lodash.range';\r\nimport './Demo.css'\r\n\r\nfunction reinsert(arr, from, to) {\r\n  const _arr = arr.slice(0);\r\n  const val = _arr[from];\r\n  _arr.splice(from, 1);\r\n  _arr.splice(to, 0, val);\r\n  return _arr;\r\n}\r\n\r\nfunction clamp(n, min, max) {\r\n  return Math.max(Math.min(n, max), min);\r\n}\r\n\r\nconst springConfig = {stiffness: 300, damping: 50};\r\nconst itemsCount = 5;\r\n\r\nexport default class Demo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      topDeltaY: 0,\r\n      mouseY: 0,\r\n      isPressed: false,\r\n      originalPosOfLastPressed: 0,\r\n      order: range(itemsCount),\r\n    };\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('touchmove', this.handleTouchMove);\r\n    window.addEventListener('touchend', this.handleMouseUp);\r\n    window.addEventListener('mousemove', this.handleMouseMove);\r\n    window.addEventListener('mouseup', this.handleMouseUp);\r\n  };\r\n\r\n  handleTouchStart = (key, pressLocation, e) => {\r\n    this.handleMouseDown(key, pressLocation, e.touches[0]);\r\n  };\r\n\r\n  handleTouchMove = (e) => {\r\n    e.preventDefault();\r\n    this.handleMouseMove(e.touches[0]);\r\n  };\r\n\r\n  handleMouseDown = (pos, pressY, {pageY}) => {\r\n    this.setState({\r\n      topDeltaY: pageY - pressY,\r\n      mouseY: pressY,\r\n      isPressed: true,\r\n      originalPosOfLastPressed: pos,\r\n    });\r\n  };\r\n\r\n  handleMouseMove = ({pageY}) => {\r\n    const {isPressed, topDeltaY, order, originalPosOfLastPressed} = this.state;\r\n\r\n    if (isPressed) {\r\n      const mouseY = pageY - topDeltaY;\r\n      const currentRow = clamp(Math.round(mouseY / 100), 0, itemsCount - 1);\r\n      let newOrder = order;\r\n\r\n      if (currentRow !== order.indexOf(originalPosOfLastPressed)){\r\n        newOrder = reinsert(order, order.indexOf(originalPosOfLastPressed), currentRow);\r\n      }\r\n\r\n      this.setState({mouseY: mouseY, order: newOrder});\r\n    }\r\n  };\r\n\r\n  handleMouseUp = () => {\r\n    this.setState({isPressed: false, topDeltaY: 0});\r\n  };\r\n\r\n  render() {\r\n    const {mouseY, isPressed, originalPosOfLastPressed, order} = this.state;\r\n\r\n    return (\r\n      <div className=\"demo8\">\r\n        {range(itemsCount).map(i => {\r\n          const style = originalPosOfLastPressed === i && isPressed\r\n            ? {\r\n                scale: spring(1.1, springConfig),\r\n                shadow: spring(16, springConfig),\r\n                y: mouseY,\r\n              }\r\n            : {\r\n                scale: spring(1, springConfig),\r\n                shadow: spring(1, springConfig),\r\n                y: spring(order.indexOf(i) * 100, springConfig),\r\n              };\r\n          return (\r\n            <Motion style={style} key={i}>\r\n              {({scale, shadow, y}) =>\r\n                <div\r\n                  onMouseDown={this.handleMouseDown.bind(null, i, y)}\r\n                  onTouchStart={this.handleTouchStart.bind(null, i, y)}\r\n                  className=\"demo8-item\"\r\n                  style={{\r\n                    boxShadow: `rgba(0, 0, 0, 0.2) 0px ${shadow}px ${2 * shadow}px 0px`,\r\n                    transform: `translate3d(0, ${y}px, 0) scale(${scale})`,\r\n                    WebkitTransform: `translate3d(0, ${y}px, 0) scale(${scale})`,\r\n                    zIndex: i === originalPosOfLastPressed ? 99 : i,\r\n                  }}>\r\n                  {order.indexOf(i) + 1}\r\n                </div>\r\n              }\r\n            </Motion>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Demo from './Demo';\r\n\r\nReactDOM.render(<Demo />, document.getElementById('root'));"],"sourceRoot":""}